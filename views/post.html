{{block "post" .}}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{.Summary}}">
    <link rel="stylesheet" href="/s/css/main.css">
    <script src="https://unpkg.com/htmx.org@2.0.2"
            integrity="sha384-Y7hw+L/jvKeWIRRkqWYfPcvVxHzVzn5REgzbawhxAuQGwX1XWe70vji+VSeHOThJ"
            crossorigin="anonymous"></script>
    <title>{{.Title}}</title>
  </head>
  <body>
    <nav>
      <a href="/">Home</a>
      <a href="/posts">Posts</a>
      <a href="/papers">Papers</a>
      <a href="/projects">Projects</a>
      <a href="/rss.xml">RSS</a>
    </nav>
    <main>
      <article>
        <h1>{{.Title}}</h1>
        <blockquote>{{.Summary}}</blockquote>
        {{.Content}}
        <hr>
        {{template "comments" .}}
      </article>
    </main>
    <footer>footer goes here</footer>
  </body>
</html>
{{end}}

{{block "comments" .}}
<div id="comments">{{range .Comments}}{{template "comment" .}}{{end}}</div>
<div id="addComment">
  <form hx-post="/posts/{{.Link}}/comments" hx-target="#comments" hx-swap="beforeend">
    <textarea name="comment" rows="8" wrap="virtual" placeholder="write a comment..." ></textarea>
    <br/>
    <input type="submit" value="add comment">
  </form>
</div>
{{end}}

{{block "comment" .}}
<div class="comment">
  <div class="metadata"><span class="user">{{.Username}}</span> <span class="when">{{.When}}</span></div>
  <div class="commentary">{{.Content}}</div>
</div>
{{end}}
